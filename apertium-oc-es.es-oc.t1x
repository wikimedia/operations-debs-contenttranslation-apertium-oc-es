<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- -*- nxml -*- -->
<transfer default="chunk">

  <section-def-cats>

    <def-cat n="nom">
      <cat-item tags="n.*"/>
<!--Falten els altres np (antroponims) que tenen gen i nbr, revisar regles.-->
      <cat-item tags="np.loc"/>
      <cat-item tags="np.al"/>
    </def-cat>
    
    <def-cat n="ant">
      <cat-item tags="np.ant"/>
    </def-cat>
    
    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>
    
    <def-cat n="querel">
      <cat-item lemma="que" tags="rel.*"/>
    </def-cat>
    
    <def-cat n="no">
      <cat-item lemma="no" tags="adv"/>
    </def-cat>
    
    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
    </def-cat>
    
    <def-cat n="det">
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
<!-- <cat-item tags="num.*"/> -->
    </def-cat>
    
    <def-cat n="detnt">
      <cat-item tags="detnt"/>
    </def-cat>
    
    <def-cat n="percent">
      <cat-item tags="num.percent"/>
    </def-cat>
    
    <def-cat n="ij">
      <cat-item tags="ij"/>
    </def-cat>
    
    <def-cat n="num">
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
    </def-cat>
    
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>
    
    <def-cat n="en">
      <cat-item lemma="en" tags="pr"/>
    </def-cat>
    
    <def-cat n="a">
      <cat-item lemma="a" tags="pr"/>
    </def-cat>
    
    <def-cat n="ir">
      <cat-item lemma="ir" tags="vblex.*"/>
    </def-cat>
    
    <def-cat n="acabar">
      <cat-item lemma="acabar" tags="vblex.*"/>
    </def-cat>
    
    <def-cat n="prnperssubj">
<!-- pronoms personals-->
      <cat-item lemma="yo" tags="prn.*"/>
      <cat-item lemma="tu" tags="prn.*"/>
      <cat-item lemma="él" tags="prn.*"/>
      <cat-item lemma="usted" tags="prn.*"/>
      <cat-item lemma="nosotros" tags="prn.*"/>
      <cat-item lemma="vosotros" tags="prn.*"/>
    </def-cat>
    
    <def-cat n="prnsubj">
<!-- prn no personals que poden ser subjecte-->
      <cat-item tags="prn.tn.*"/>
      <cat-item lemma="qué" tags="prn.itg.*"/>
      <cat-item lemma="quién" tags="prn.itg.*"/>
      <cat-item lemma="quien" tags="rel.nn.mf.sg"/>
      <cat-item lemma="quien" tags="rel.nn.mf.pl"/>
    </def-cat>
    
    <def-cat n="prnitg">
      <cat-item tags="prn.itg.*"/>
    </def-cat>
    
    <def-cat n="el_cual">
      <cat-item lemma="el cual" tags="rel.*"/>
      <cat-item lemma="el que" tags="rel.*"/>
<!-- <cat-item lemma="quien" tags="rel.*"/> -->
    </def-cat>
    
    <def-cat n="rel">
      <cat-item tags="rel.*"/>
    </def-cat>
    
    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>
    
    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>
    
    <def-cat n="imp">
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbmod.imp.*"/>
    </def-cat>
    
    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>
    
    <def-cat n="verbs_amb_ger">
      <cat-item lemma="estar" tags="vblex.*"/>
      <cat-item lemma="ir" tags="vblex.*"/>
      <cat-item lemma="venir" tags="vblex.*"/>
    </def-cat>
    
    <def-cat n="verbpers">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vblex.fts.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbser.fts.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbhaver.fts.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vbmod.fts.*"/>
    </def-cat>
    
    <def-cat n="auxpers">
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.fts.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
    </def-cat>
    
    <def-cat n="auxinf">
      <cat-item tags="vbhaver.inf"/>
    </def-cat>
    
    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
    </def-cat>
    
    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>
    
    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>
    
    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>
    
    <def-cat n="preadv">
      <cat-item tags="preadv"/>
    </def-cat>
    
    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>
    
    <def-cat n="cnjcoo">
      <cat-item tags="cnjcoo"/>
    </def-cat>
    
    <def-cat n="cnj">
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>
    
    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>
    
    <def-cat n="coma">
      <cat-item tags="cm"/>
    </def-cat>
    
    <def-cat n="lquest">
      <cat-item tags="lquest"/>
    </def-cat>
    
  </section-def-cats>
  <section-def-attrs>

    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.al"/>
      <attr-item tags="np.ant"/>
    </def-attr>
    
    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>
    
    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.ind"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vbhaver.pp"/>
      <attr-item tags="vbser.pp"/>
    </def-attr>
    
    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="detnt"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
      <attr-item tags="adj"/><!--per a vario(det) - divèrs(adj), pq es col·loqui bé l'etiqueta -->
    </def-attr>
    
    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.percent"/>
    </def-attr>
    
    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>
    
    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>
    
    <def-attr n="etiq_adv">
      <attr-item tags="nomes"/>
    </def-attr>
    
    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>
    
    <def-attr n="a_prn">
      <attr-item tags="prn"/>
    </def-attr>
    
    <def-attr n="a_rel">
      <attr-item tags="rel"/>
      <attr-item tags="rel.an"/>
      <attr-item tags="rel.adv"/>
    </def-attr>
    
    <def-attr n="tipus_prn_chunk">
      <attr-item tags="rel"/>
      <attr-item tags="rel.adv"/>
      <attr-item tags="rel.nn"/>
      <attr-item tags="rel.an"/>
      <attr-item tags="tn"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
    </def-attr>
    
    <def-attr n="tipus_prn">
      <attr-item tags="rel"/>
      <attr-item tags="rel.adv"/>
      <attr-item tags="rel.nn"/>
      <attr-item tags="rel.an"/>
      <attr-item tags="tn"/>
      <attr-item tags="tn.pos"/>
      <attr-item tags="tn.ref"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
    </def-attr>
    
    <def-attr n="tipoenc_pro">
      <attr-item tags="ref.p3.mf.sp"/>
      <attr-item tags="p1.mf.pl"/>
      <attr-item tags="p1.mf.sg"/>
      <attr-item tags="p2.mf.pl"/>
      <attr-item tags="p2.mf.sg"/>
      <attr-item tags="p3.f.pl"/>
      <attr-item tags="p3.f.sg"/>
      <attr-item tags="p3.mf.pl"/>
      <attr-item tags="p3.mf.sg"/>
      <attr-item tags="p3.m.pl"/>
      <attr-item tags="p3.m.sg"/>
      <attr-item tags="p3.nt"/>
      <attr-item tags="mf.sg"/>
      <attr-item tags="adv"/>
    </def-attr>
    
    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>
    
    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
      <attr-item tags="GD"/>
    </def-attr>
    
    <def-attr n="gen_sense_mf">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="GD"/>
    </def-attr>
    
    <def-attr n="gen_mf">
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
    </def-attr>
    
    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>
    
    <def-attr n="nbr_sense_sp">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="ND"/>
    </def-attr>
    
    <def-attr n="nbr_sp">
      <attr-item tags="sp"/>
    </def-attr>
    
    <def-attr n="nbr_pp">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
    </def-attr>
    
    <def-attr n="gen_pp">
      <attr-item tags="f"/>
      <attr-item tags="m"/>
    </def-attr>
    
    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fts"/>
      <attr-item tags="fti"/>
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="prs"/>
      <attr-item tags="pp"/>
      <attr-item tags="ger"/>
      <attr-item tags="inf"/>
    </def-attr>
    
  </section-def-attrs>
  
  <section-def-vars>
    <def-var n="tipusverb"/>
    <def-var n="cv_verb"/>
    <def-var n="tipusprep"/>
    <def-var n="tipusnom"/>
    <def-var n="lema_sn"/>
    <def-var n="prnpro_afegit"/>
    <def-var n="quesia"/>
    <def-var n="quesia2"/>
    <def-var n="etiq_aux"/>
    <def-var n="etiq_det"/>
    <def-var n="concorden"/>
    <def-var n="afegeix_prn"/>
    <def-var n="lema_sv"/>
    <def-var n="elcual_prep"/>
    <def-var n="elcual_gen"/>
    <def-var n="elcual_nbr"/>
    <def-var n="pronomsubj"/>
    <def-var n="tipusrel"/>
    <def-var n="numero"/>
    <def-var n="genero"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="caseFirstWord"/>
    <def-var n="lema"/>
    <def-var n="EOS"/>
    <def-var n="paraula1"/>
    <def-var n="SVnegatiu"/>
    <def-var n="auxiliar"/>
  </section-def-vars>
  
  <section-def-lists>
    <def-list n="adv_mig">
      <list-item v="pas"/>
      <list-item v="ja"/>
      <list-item v="totjorn"/>
      <list-item v="tostemp"/>
      <list-item v="lèu"/>
      <list-item v="sovent"/>
      <list-item v="fòrça"/>
      <list-item v="tròp"/>
      <list-item v="jamai"/>
      <list-item v="ben"/>
      <list-item v="plan"/>
      <list-item v="mal"/>
      <list-item v="gaireben"/>
    </def-list>
  
    <def-list n="vbambser">
      <list-item v="anar"/>
      <list-item v="devier"/>
      <list-item v="arribar"/>
      <list-item v="morir"/>
      <list-item v="defuntar"/>
      <list-item v="entrar"/>
      <list-item v="nàisser"/>
      <list-item v="partir"/>
      <list-item v="marchar"/>
      <list-item v="demorar"/>
      <list-item v="venir"/>
      <list-item v="devenir"/>
      <list-item v="gésser"/>
      <list-item v="sortir"/>
      <list-item v="passar"/>
      <list-item v="estar"/>
      <list-item v="èsser"/>
    </def-list>
  
    <def-list n="con_a">
      <list-item v="corresponder" alt="oc"/>
      <list-item v="relacionar" alt="oc"/>
      <list-item v="lalà" alt="oc@aran"/>
      <list-item v="hablar"/>
    </def-list>
  
    <def-list n="por_de">
      <list-item v="formar" alt="oc"/>
      <list-item v="lalà" alt="oc@aran"/>
    </def-list>
  
    <def-list n="por_contra">
      <list-item v="cambiar" alt="oc"/>
      <list-item v="intercambiar" alt="oc"/>
      <list-item v="lalà" alt="oc@aran"/>
    </def-list>
  
    <def-list n="de_per">
      <list-item v="lalà" alt="oc"/>
      <list-item v="lalà" alt="oc@aran"/>
    </def-list>
  
    <def-list n="a_en">
      <list-item v="lalà" alt="oc"/>
      <list-item v="llegar" alt="oc@aran"/>
    </def-list>
  
    <def-list n="a_dins">
      <list-item v="entrar"/>
      <list-item v="estar"/>
      <list-item v="arribar" alt="oc"/>
    </def-list>
  
    <def-list n="a_ta">
      <list-item v="ir" alt="oc@aran"/>
      <list-item v="lalà" alt="oc"/>
    </def-list>
  
    <def-list n="en_a">
      <list-item v="pensar"/>
      <list-item v="participar"/>
    </def-list>
  
    <def-list n="en_sus">
      <list-item v="sentar"/>
    </def-list>
  
    <def-list n="fechas">
      <list-item v="navidad"/>
      <list-item v="pascua"/>
      <list-item v="vacaciones"/>
    </def-list>
  
    <def-list n="meses">
      <list-item v="enero"/>
      <list-item v="febrero"/>
      <list-item v="marzo"/>
      <list-item v="abril"/>
      <list-item v="mayo"/>
      <list-item v="junio"/>
      <list-item v="julio"/>
      <list-item v="agosto"/>
      <list-item v="septiembre"/>
      <list-item v="octubre"/>
      <list-item v="noviembre"/>
      <list-item v="diciembre"/>
    </def-list>
  
    <def-list n="part_sing">
      <list-item v="aiga"/>
      <list-item v="boder"/>
      <list-item v="vin"/>
      <list-item v="cervesa"/>
      <list-item v="pan"/>
      <list-item v="sens"/>
      <list-item v="confetura"/>
      <list-item v="confitura"/>
      <list-item v="pebe"/>
      <list-item v="sabon"/>
      <list-item v="sau"/>
      <list-item v="sal"/>
    </def-list>
  
    <def-list n="locativo">
      <list-item v="mundo"/>
      <list-item v="ascensor"/>
      <list-item v="calle"/>
      <list-item v="plaza"/>
      <list-item v="mercado"/>
      <list-item v="zona"/>
      <list-item v="área"/>
      <list-item v="comarca"/>
      <list-item v="barrio"/>
      <list-item v="ciudad"/>
      <list-item v="comarca"/>
      <list-item v="provincia"/>
      <list-item v="isla"/>
      <list-item v="país"/>
      <list-item v="planeta"/>
      <list-item v="parlamento"/>
      <list-item v="casa"/>
      <list-item v="ropa"/>
      <list-item v="escuela"/>
      <list-item v="congreso"/>
      <list-item v="domicilio"/>
      <list-item v="urbanización"/>
      <list-item v="prisión"/>
      <list-item v="fábrica"/>
      <list-item v="montaña"/>
      <list-item v="cámara"/>
      <list-item v="habitación"/>
      <list-item v="valle"/>
      <list-item v="frontera"/>
      <list-item v="castillo"/>
      <list-item v="sala"/>
      <list-item v="iglesia"/>
      <list-item v="fiesta"/>
      <list-item v="explanada"/>
      <list-item v="internet"/>
      <list-item v="ayuntamiento"/>
      <list-item v="polígono"/>
      <list-item v="auditorio"/>
      <list-item v="extrangero"/>
      <list-item v="pueblo"/>
      <list-item v="portal"/>
      <list-item v="canal"/>
      <list-item v="tierra"/>
      <list-item v="torre"/>
      <list-item v="patio"/>
      <list-item v="programación"/>
      <list-item v="programa"/>
      <list-item v="aula"/>
      <list-item v="edificio"/>
      <list-item v="hospital"/>
      <list-item v="software"/>
      <list-item v="principado"/>
      <list-item v="banco"/>
      <list-item v="tienda"/>
      <list-item v="franja"/>
      <list-item v="senado"/>
      <list-item v="condado"/>
      <list-item v="gobierno"/>
      <list-item v="capital"/>
      <list-item v="siglo"/>
      <list-item v="estado"/>
      <list-item v="presupuesto"/>
      <list-item v="hotel"/>
    </def-list>
  
  </section-def-lists>
  
  <section-def-macros>

    <def-macro n="verb_ref" npar="2">
<!-- aquesta macro canvia el significat de certs verbs reflexius-->
      <choose>
<!--si el prn és ref...-->
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <or>
                  <equal>
                    <clip pos="2" side="sl" part="pers"/>
                    <lit-tag v="p3"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </or>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <choose>
<!-- canvia aquests verbs-->
            <when alt="oc">
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="llamar"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="sonar"/>
              </let>
            </when>
            <when>
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="plantear"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="prepausar"/>
              </let>
            </when>
            <when>
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="encarecer"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="encarir"/>
              </let>
            </when>
            <when alt="oc">
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="referir"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="far# referéncia"/>
              </let>
            </when>
            <when alt="oc@aran">
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="referir"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="hèr# referéncia"/>
              </let>
            </when>
            <when alt="oc">
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="negar# a"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="voler# pas"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="verb_ref_mod" npar="3">
<!-- aquesta macro canvia el significat de certs verbs reflexius.-->
      <choose>
<!--si el prn és ref...-->
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <or>
                  <equal>
                    <clip pos="2" side="sl" part="pers"/>
                    <lit-tag v="p3"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </or>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <choose>
<!-- canvia aquests verbs-->
            <when alt="oc">
              <test>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="llamar"/>
                </equal>
              </test>
              <let>
                <clip pos="3" side="tl" part="lem"/>
                <lit v="sonar"/>
              </let>
            </when>
            <when>
              <test>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="plantear"/>
                </equal>
              </test>
              <let>
                <clip pos="3" side="tl" part="lem"/>
                <lit v="prepausar"/>
              </let>
            </when>
            <when>
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="encarecer"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="encarir"/>
              </let>
            </when>
            <when alt="oc">
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="referir"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="far# referéncia"/>
              </let>
            </when>
            <when alt="oc@aran">
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="referir"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="hèr# referéncia"/>
              </let>
            </when>
            <when alt="oc">
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="negar# a"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="voler# pas"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="cv_prep2" npar="1">
      <choose>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="sl" part="lem"/>
                <lit v="de"/>
              </equal>
              <equal>
                <var n="tipusverb"/>
                <lit v="vbde_per"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="per"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
              </test>
              <choose>
                <when>
                  <test>
                    <equal>
                      <var n="tipusverb"/>
                      <lit v="vben_sus"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="1" side="tl" part="lem"/>
                    <lit v="sus"/>
                  </let>
                </when>
                <otherwise>
                  <choose>
                    <when>
                      <test>
                        <equal>
                          <var n="tipusverb"/>
                          <lit v="vba_en"/>
                        </equal>
                      </test>
                      <let>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit v="en"/>
                      </let>
                    </when>
                    <otherwise>
                      <choose>
                        <when>
                          <test>
                            <equal>
                              <var n="tipusverb"/>
                              <lit v="vba_ta"/>
                            </equal>
                          </test>
                          <let>
                            <clip pos="1" side="tl" part="lem"/>
                            <lit v="tà"/>
                          </let>
                        </when>
                        <otherwise>
                          <choose>
                            <when>
                              <test>
                                <equal>
                                  <var n="tipusverb"/>
                                  <lit v="vba_dins"/>
                                </equal>
                              </test>
                              <let>
                                <clip pos="1" side="tl" part="lem"/>
                                <lit v="dins"/>
                              </let>
                            </when>
                          </choose>
                        </otherwise>
                      </choose>
                    </otherwise>
                  </choose>
                </otherwise>
              </choose>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="por"/>
                    </equal>
                  </test>
                  <choose>
                    <when>
                      <test>
                        <equal>
                          <var n="tipusverb"/>
                          <lit v="vbpor_de"/>
                        </equal>
                      </test>
                      <let>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit v="de"/>
                      </let>
                    </when>
                    <otherwise>
                      <choose>
                        <when>
                          <test>
                            <equal>
                              <var n="tipusverb"/>
                              <lit v="vbpor_contra"/>
                            </equal>
                          </test>
                          <let>
                            <clip pos="1" side="tl" part="lem"/>
                            <lit v="contra"/>
                          </let>
                        </when>
                      </choose>
                    </otherwise>
                  </choose>
                </when>
                <otherwise>
                  <choose>
                    <when>
                      <test>
                        <equal>
                          <clip pos="1" side="sl" part="lem"/>
                          <lit v="en"/>
                        </equal>
                      </test>
                      <choose>
                        <when>
                          <test>
                            <equal>
                              <var n="tipusverb"/>
                              <lit v="vben_a"/>
                            </equal>
                          </test>
                          <let>
                            <clip pos="1" side="tl" part="lem"/>
                            <lit v="a"/>
                          </let>
                        </when>
                      </choose>
                    </when>
                    <otherwise>
                      <choose>
                        <when>
                          <test>
                            <and>
                              <equal>
                                <clip pos="1" side="sl" part="lem"/>
                                <lit v="con"/>
                              </equal>
                              <equal>
                                <var n="tipusverb"/>
                                <lit v="vbcon_a"/>
                              </equal>
                            </and>
                          </test>
                          <let>
                            <clip pos="1" side="tl" part="lem"/>
                            <lit v="a"/>
                          </let>
                        </when>
                      </choose>
                    </otherwise>
                  </choose>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>
    <def-macro n="cv_prep" npar="1">
      <choose alt="oc@aran">
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="para"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="entà"/>
          </let>
        </when>
      </choose>
      <call-macro n="cv_prep2">
        <with-param pos="1"/>
      </call-macro>
    </def-macro>

    <def-macro n="tipus_nom" npar="1">
      <choose>
        <when>
          <test>
<!-- 						<or> -->
            <in caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <list n="locativo"/>
            </in>
<!--						<equal>
								<clip pos="1" side="sl" part="a_nom"/>
								<lit-tag v="np.loc"/>
							</equal>
						</or>-->
          </test>
          <let>
            <var n="tipusnom"/>
            <lit-tag v="loc"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="a_nom"/>
                  <lit-tag v="np.loc"/>
                </equal>
              </test>
              <let>
                <var n="tipusnom"/>
                <lit-tag v="nploc"/>
              </let>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <in caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <list n="fechas"/>
                    </in>
                  </test>
                  <let>
                    <var n="tipusnom"/>
                    <lit-tag v="fecha"/>
                  </let>
                </when>
                <otherwise>
                  <choose>
                    <when>
                      <test>
                        <in caseless="yes">
                          <clip pos="1" side="sl" part="lem"/>
                          <list n="meses"/>
                        </in>
                      </test>
                      <let>
                        <var n="tipusnom"/>
                        <lit-tag v="mes"/>
                      </let>
                    </when>
                    <otherwise>
                      <let>
                        <var n="tipusnom"/>
                        <lit-tag v="ndf"/>
                      </let>
                    </otherwise>
                  </choose>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="tipus_verb" npar="1">
      <let>
        <var n="cv_verb"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <in caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <list n="por_de"/>
            </in>
          </test>
          <let>
            <var n="tipusverb"/>
            <lit v="vbpor_de"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <list n="a_en"/>
                </in>
              </test>
              <let>
                <var n="tipusverb"/>
                <lit v="vba_en"/>
              </let>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <in caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <list n="en_sus"/>
                    </in>
                  </test>
                  <let>
                    <var n="tipusverb"/>
                    <lit v="vben_sus"/>
                  </let>
                </when>
                <otherwise>
                  <choose>
                    <when>
                      <test>
                        <in caseless="yes">
                          <clip pos="1" side="sl" part="lem"/>
                          <list n="por_contra"/>
                        </in>
                      </test>
                      <let>
                        <var n="tipusverb"/>
                        <lit v="vbpor_contra"/>
                      </let>
                    </when>
                    <otherwise>
                      <choose>
                        <when>
                          <test>
                            <in caseless="yes">
                              <clip pos="1" side="sl" part="lem"/>
                              <list n="de_per"/>
                            </in>
                          </test>
                          <let>
                            <var n="tipusverb"/>
                            <lit v="vbde_per"/>
                          </let>
                        </when>
                        <otherwise>
                          <choose>
                            <when>
                              <test>
                                <in caseless="yes">
                                  <clip pos="1" side="sl" part="lem"/>
                                  <list n="en_a"/>
                                </in>
                              </test>
                              <let>
                                <var n="tipusverb"/>
                                <lit v="vben_a"/>
                              </let>
                            </when>
                            <otherwise>
                              <choose>
                                <when>
                                  <test>
                                    <in caseless="yes">
                                      <clip pos="1" side="sl" part="lem"/>
                                      <list n="a_ta"/>
                                    </in>
                                  </test>
                                  <let>
                                    <var n="tipusverb"/>
                                    <lit v="vba_ta"/>
                                  </let>
                                </when>
                                <otherwise>
                                  <choose>
                                    <when>
                                      <test>
                                        <in caseless="yes">
                                          <clip pos="1" side="sl" part="lem"/>
                                          <list n="con_a"/>
                                        </in>
                                      </test>
                                      <let>
                                        <var n="tipusverb"/>
                                        <lit v="vbcon_a"/>
                                      </let>
                                    </when>
                                    <otherwise>
                                      <choose>
                                        <when>
                                          <test>
                                            <in caseless="yes">
                                              <clip pos="1" side="sl" part="lem"/>
                                              <list n="a_dins"/>
                                            </in>
                                          </test>
                                          <let>
                                            <var n="tipusverb"/>
                                            <lit v="vba_dins"/>
                                          </let>
                                        </when>
                                        <otherwise>
                                          <let>
                                            <var n="tipusverb"/>
                                            <lit v="nodef"/>
                                          </let>
                                        </otherwise>
                                      </choose>
                                    </otherwise>
                                  </choose>
                                </otherwise>
                              </choose>
                            </otherwise>
                          </choose>
                        </otherwise>
                      </choose>
                    </otherwise>
                  </choose>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lemh"/>
              <lit v="acabar"/>
            </equal>
          </test>
          <let>
            <var n="cv_verb"/>
            <lit-tag v="acabar"/>
          </let>
        </when>
        <when>
          <test>
            <or>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="ir"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="venir"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="subir"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="bajar"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="entrar"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="salir"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="volver"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="cv_verb"/>
            <lit-tag v="ir"/>
          </let>
        </when>
        <when>
          <test>
            <or>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="continuar"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lemh"/>
                <lit v="seguir"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="cv_verb"/>
            <lit-tag v="continuar"/>
          </let>
        </when>
      </choose>
    </def-macro>
    
    <def-macro n="posa_prn" npar="1">
      <let>
        <var n="afegeix_prn"/>
        <lit v="no"/>
      </let>
      <choose>
        <when>
          <test>
            <equal>
              <var n="elcual_prep"/>
              <lit v="de"/>
            </equal>
          </test>
          <append n="prnpro_afegit">
            <lit v="en"/>
            <lit-tag v="prn.pro.adv"/>
          </append>
          <let>
            <var n="afegeix_prn"/>
            <lit v="si"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <var n="elcual_prep"/>
              <lit v="a"/>
            </equal>
          </test>
          <append n="prnpro_afegit">
            <lit v="li"/>
            <lit-tag v="prn.pro.p3.mf"/>
            <var n="elcual_nbr"/>
          </append>
          <let>
            <var n="afegeix_prn"/>
            <lit v="si"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="tener# que"/>
            </equal>
          </test>
          <let>
            <var n="prnpro_afegit"/>
            <lit v=""/>
          </let>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
              </test>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="1" side="sl" part="nbr"/>
                      <lit-tag v="sg"/>
                    </equal>
                  </test>
                  <append n="prnpro_afegit">
                    <lit v="me"/>
                    <lit-tag v="prn.pro.p1.mf.sg"/>
                  </append>
                </when>
                <otherwise>
                  <append n="prnpro_afegit">
                    <lit v="nos" alt="oc"/>
                    <lit v="mos" alt="oc@aran"/>
                    <lit-tag v="prn.pro.p1.mf.pl"/>
                  </append>
                </otherwise>
              </choose>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="1" side="sl" part="pers"/>
                      <lit-tag v="p2"/>
                    </equal>
                  </test>
                  <choose>
                    <when>
                      <test>
                        <equal>
                          <clip pos="1" side="sl" part="nbr"/>
                          <lit-tag v="sg"/>
                        </equal>
                      </test>
                      <append n="prnpro_afegit">
                        <lit v="te"/>
                        <lit-tag v="prn.pro.p2.mf.sg"/>
                      </append>
                    </when>
                    <otherwise>
                      <append n="prnpro_afegit">
                        <lit v="vos"/>
                        <lit-tag v="prn.pro.p2.mf.pl"/>
                      </append>
                    </otherwise>
                  </choose>
                </when>
                <otherwise>
                  <append n="prnpro_afegit">
                    <lit v="li"/>
                    <lit-tag v="prn.pro.p3.mf"/>
                    <clip pos="1" side="sl" part="nbr"/>
                  </append>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="caler"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="pers"/>
            <lit-tag v="p3"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <lit-tag v="sg"/>
          </let>
          <let>
            <var n="afegeix_prn"/>
            <lit v="si"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="posa_prn_compost" npar="2">
      <let>
        <var n="afegeix_prn"/>
        <lit v="no"/>
      </let>
      <choose>
        <when>
          <test>
            <equal>
              <var n="elcual_prep"/>
              <lit v="de"/>
            </equal>
          </test>
          <append n="prnpro_afegit">
            <lit v="en"/>
            <lit-tag v="prn.pro.adv"/>
          </append>
          <let>
            <var n="afegeix_prn"/>
            <lit v="si"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <var n="elcual_prep"/>
              <lit v="a"/>
            </equal>
          </test>
          <append n="prnpro_afegit">
            <lit v="li"/>
            <lit-tag v="prn.pro.p3.mf"/>
            <var n="elcual_nbr"/>
          </append>
          <let>
            <var n="afegeix_prn"/>
            <lit v="si"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="sl" part="lem"/>
              <lit v="tener# que"/>
            </equal>
          </test>
          <let>
            <var n="prnpro_afegit"/>
            <lit v=""/>
          </let>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
              </test>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="1" side="sl" part="nbr"/>
                      <lit-tag v="sg"/>
                    </equal>
                  </test>
                  <append n="prnpro_afegit">
                    <lit v="me"/>
                    <lit-tag v="prn.pro.p1.mf.sg"/>
                  </append>
                </when>
                <otherwise>
                  <append n="prnpro_afegit">
                    <lit v="nos"/>
                    <lit-tag v="prn.pro.p1.mf.pl"/>
                  </append>
                </otherwise>
              </choose>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="1" side="sl" part="pers"/>
                      <lit-tag v="p2"/>
                    </equal>
                  </test>
                  <choose>
                    <when>
                      <test>
                        <equal>
                          <clip pos="1" side="sl" part="nbr"/>
                          <lit-tag v="sg"/>
                        </equal>
                      </test>
                      <append n="prnpro_afegit">
                        <lit v="te"/>
                        <lit-tag v="prn.pro.p2.mf.sg"/>
                      </append>
                    </when>
                    <otherwise>
                      <append n="prnpro_afegit">
                        <lit v="vos"/>
                        <lit-tag v="prn.pro.p2.mf.pl"/>
                      </append>
                    </otherwise>
                  </choose>
                </when>
                <otherwise>
                  <append n="prnpro_afegit">
                    <lit v="li"/>
                    <lit-tag v="prn.pro.p3.mf"/>
                    <clip pos="1" side="sl" part="nbr"/>
                  </append>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
          <let>
            <clip pos="2" side="tl" part="lem"/>
            <lit v="caler"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="pers"/>
            <lit-tag v="p3"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <lit-tag v="sg"/>
          </let>
          <let>
            <var n="afegeix_prn"/>
            <lit v="si"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="posa_adv" npar="1">
      <choose>
        <when>
          <test>
            <not>
              <or>
                <equal>
                  <var n="elcual_prep"/>
                  <lit v=""/>
                </equal>
                <equal>
                  <var n="elcual_prep"/>
                  <lit v="de"/>
                </equal>
                <equal>
                  <var n="elcual_prep"/>
                  <lit v="al"/>
                </equal>
              </or>
            </not>
          </test>
          <out>
            <b/>
            <chunk name="adv_afegit">
              <tags>
                <tag>  <lit-tag v="adv"/>
                </tag>
              </tags>
              <lu>
                <var n="elcual_prep"/>
                <lit-tag v="pr"/>
              </lu>
              <b/>
              <lu alt="oc">
                <lit v="el"/>
                <lit-tag v="prn.tn.p3"/>
                <var n="elcual_gen"/>
                <var n="elcual_nbr"/>
              </lu>
              <lu alt="oc@aran">
                <lit v="eth"/>
                <lit-tag v="prn.tn.p3"/>
                <var n="elcual_gen"/>
                <var n="elcual_nbr"/>
              </lu>
            </chunk>
          </out>
        </when>
      </choose>
    </def-macro>

    <def-macro n="usted" npar="1">
      <let>
        <var n="pronomsubj"/>
        <lit-tag v=""/>
      </let>
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="usted"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sg"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="vos"/>
              </let>
            </when>
            <otherwise>
              <let alt="oc">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="vosautres"/>
              </let>
              <let alt="oc@aran">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="vosati"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="GD"/>
              </let>
            </otherwise>
          </choose>
          <let>
            <clip pos="1" side="tl" part="pers"/>
            <lit-tag v="p2"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <lit-tag v="pl"/>
          </let>
          <let>
            <var n="pronomsubj"/>
            <lit-tag v="usted"/>
          </let>
        </when>
      </choose>
    </def-macro>
    
    <def-macro n="f_lex_adv" npar="1">
      <choose alt="oc">
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="si no"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="pas"/>
          </let>
          <out>
            <chunk name="cnj" case="caseFirstWord">
              <tags>
                <tag>  <clip pos="1" side="tl" part="tags"/>
                </tag>
              </tags>
              <lu>
                <lit v="se"/>
                <lit-tag v="cnjadv"/>
              </lu>
            </chunk>
            <b/>
          </out>
        </when>
      </choose> 
      <choose alt="oc@aran">
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="lalà"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="pas"/>
          </let>
          <out>
            <chunk name="cnj" case="caseFirstWord">
              <tags>
                <tag>  <clip pos="1" side="tl" part="tags"/>
                </tag>
              </tags>
              <lu>
                <lit v="se"/>
                <lit-tag v="cnjadv"/>
              </lu>
            </chunk>
            <b/>
          </out>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_imp" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="imp"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="pers"/>
                <lit-tag v="p2"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_imp_enc" npar="2">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="imp"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="pers"/>
                <lit-tag v="p2"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="se"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="vos"/>
                  </let>
                  <let>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                    <lit-tag v="p2.mf.pl"/>
                  </let>
                </when>
              </choose>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_fts" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="fts"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="pis"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="firstWord" npar="1">
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="a_np_acr"/>
	      <lit v=""/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal> 
		  <var n="EOS"/>
		  <lit v="true"/>
		</equal> 
	      </test>
	      <modify-case>
		<clip pos="1" side="tl" part="lem"/>
		<lit v="aa"/>
	      </modify-case>
	      <let>
		<var n="caseFirstWord"/>
		<lit v="Aa"/>
	      </let>
	    </when>
	    <otherwise> 
	      <let>
		<var n="caseFirstWord"/>
		<lit v="aa"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
	<otherwise>
	  <let>
	    <var n="caseFirstWord"/>
	    <lit v="aa"/>
	  </let>
	</otherwise>
      </choose>
      <let>
	<var n="EOS"/>
	<lit v="false"/>
      </let>
    </def-macro>


<!-- macro antiga , canviada per MG 25-04-08, s'ha tret de totes les regles també <let><var n="caseFirstWord"/><lit v="aa"/></let>

    <def-macro n="firstWord" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="a_np_acr"/>
              <lit v=""/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="EOS"/>
                  <lit v="true"/>
                </equal>
              </test>
              <modify-case>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="aa"/>
              </modify-case>
              <let>
                <var n="caseFirstWord"/>
                <lit v="Aa"/>
              </let>
            </when>
          </choose>
        </when>
        <otherwise>
          <let>
            <var n="caseFirstWord"/>
            <lit v="aa"/>
          </let>
        </otherwise>
      </choose>
      <let>
        <var n="EOS"/>
        <lit v="false"/>
      </let>
    </def-macro> -->


    <def-macro n="f_bcond" npar="2">
<!--Per mirar si el blanc conte o no format. Cal posar aquesta funcio en les regles en que desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si conte format cal conservar-lo, si no en conte cal eliminar-lo perque no apareguin dos espais seguits. -->
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <b pos="1"/>
                <lit v=" "/>
              </equal>
            </not>
          </test>
          <out>
            <b pos="1"/>
          </out>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord1" npar="1">
      <choose>
<!--To determine value of variables of gender and
	    number and propagate to other rules.  Variables are
	    not used again in this rule -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- If word has GD or ND, we try to assign the
		 gender or number of the previous rule. If there is no
		 value for the gender or number variable from previous
		 rules, gender will be masculine and number singular.-->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="genero"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="numero"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord2" npar="2">
      <choose>
        <when>
          <test>
<!-- do the main and second parameter gender agree?-->
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
<!-- do the main and second parameter number agree?-->
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
<!-- there is gender and number agreement-->
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
<!-- there isn't gender and number agreement-->
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
<!-- Propagate the main parameter gender if it has been modified during the translation  -->
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- Propagate the main parameter number if it has been modified during the translation  -->
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- Which is the rule general gender? -->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="2" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="2" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="2" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </and>
            </or>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="GD"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
<!-- Which is the rule general gender? -->
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="ND"/>
          </let>
        </when>
<!--       <otherwise>
	     <let>
	     <var n="genero"/>
	     <lit-tag v="m"/>
	     </let>
	     </otherwise>-->
      </choose>
<!-- Determine gender and number value if they are undetermined -->
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord3" npar="3">
      <choose>
<!-- Look whether in source language there is concordance between first and second element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Look whether in source language there is concordance between second and third element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Propagate the main parameter gender if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Propagate the main parameter number if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Determine the rule general gender. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="3" side="sl" part="gen"/>
          </let>
        </when>
<!--			<when>
	    <test>
	    <and>
	    <equal>
	    <clip pos="1" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="2" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="3" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    </and>
	    </test>
	    <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	    </let>
	    </when>-->
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="GD"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Determine the rule general number. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="3" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="ND"/>
          </let>
        </when>
      </choose>
      <choose>
<!-- Assign values to GD and ND -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord4" npar="4">
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concTercero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concTercero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
<!--		<when>
	    <test>
	    <and>
	    <equal>
	    <clip pos="1" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="2" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="3" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="4" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    </and>
	    </test>
	    <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	    </let>
	    </when>-->
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="GD"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="4" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="ND"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="vauxiliar" npar="2">
      <choose>
        <when>
          <test>
            <in caseless="yes">
              <clip pos="2" side="tl" part="lem"/>
              <list n="vbambser"/>
            </in>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="èsser"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="a_verb"/>
            <lit-tag v="vbser"/>
          </let>
        </when>
      </choose>
<!--				<let>
	  <clip pos="2" side="tl" part="gen"/>
	  <var n="genero"/>
	  </let>
      -->
    </def-macro>

    <def-macro n="vauxiliar_pro" npar="3">
      <choose>
        <when>
          <test>
            <or>
              <in caseless="yes">
                <clip pos="3" side="tl" part="lem"/>
                <list n="vbambser"/>
              </in>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <or>
                  <equal>
                    <clip pos="2" side="sl" part="pers"/>
                    <lit-tag v="p3"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal>
                </or>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <let>
            <clip pos="2" side="tl" part="lem"/>
            <lit v="èsser"/>
          </let>
          <let>
            <clip pos="2" side="tl" part="a_verb"/>
            <lit-tag v="vbser"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord_prn_pp" npar="2">
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="lem"/>
              <lit v="lo"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="tipus_rel" npar="1">
<!--GR: afegir més?-->
      <let>
        <var n="tipusrel"/>
        <lit-tag v=""/>
      </let>
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="cuando"/>
            </equal>
          </test>
          <let>
            <var n="tipusrel"/>
            <lit-tag v="cuando"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="adj_delante" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="propio"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="quite"/>
          </let>
        </when>
      </choose>
    </def-macro>

  </section-def-macros>

  <section-rules>
<!--*************************************** REGLES DE SN ******************************************** -->
    <rule comment="REGLA: NOM (per a collocar la cua en les multiparaules amb g">
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="part_sing"/>
              </in>
            </test>
            <out>
              <chunk name="part" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: ANTROPÒNIM">
      <pattern>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="sg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ANTROPÒNIM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_ant" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
          <chunk name="ant" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="sg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond" alt="oc@aran">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
      </action>
    </rule>    
    
    <rule comment="REGLA: DET ADJ ANTROPÒNIM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="adj_delante">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_adj_ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: DET ANTROPÒNIM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="ant"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_ant_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: 2 ANTROPÒNIMS (px. maria lópez)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="sg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: DET ADJ ANTROPÒNIM ANTROPÒNIM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="ant"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="adj_delante">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_adj_ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: DET ANTROPÒNIM ANTROPÒNIM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="ant"/>
        <pattern-item n="ant"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="det_ant_ant_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    
    <rule comment="REGLA: DET NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="cualquier"/>
              </equal>
            </test>
            <out>
              <chunk name="quin_nom_que_sia" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="quin"/>
                  </get-case-from>
                  <lit-tag v="adj.itg"/>
                  <clip pos="1" side="tl" part="gen" link-to="2"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="que"/>
                  <lit-tag v="cnjsub"/>
                </lu>
                <b/>
                <lu alt="oc">
                  <lit v="èsser"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
                <lu alt="oc@aran">
                  <lit v="èster"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <list n="meses"/>
                  </in>
                </test>
                <out>
                  <chunk name="nom" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_nom"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="det_nom" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_det"/>
                      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="1" side="tl" part="gen_mf"/>
                      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="1" side="tl" part="nbr_sp"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_nom"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="REGLA: PREDET DET NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="cualquier"/>
              </equal>
            </test>
            <out>
              <chunk name="predet_quin_nom_que_sia" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="quin"/>
                  <lit-tag v="adj.itg"/>
                  <clip pos="1" side="tl" part="gen" link-to="2"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="que"/>
                  <lit-tag v="cnjsub"/>
                </lu>
                <b/>
                <lu alt="oc">
                  <lit v="èsser"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
                <lu alt="oc@aran">
                  <lit v="èster"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="predet_det_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_det"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="REGLA: DET NUM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="tl" part="a_num"/>
                <lit-tag v="num.percent"/>
              </equal>
            </test>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><lit-tag v="m.sg"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="num.percent"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="det_num" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_num"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    <rule comment="REGLA: NUM NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    
     <rule comment="REGLA: NOM ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="part_sing"/>
              </in>
            </test>
            <out>
              <chunk name="partnom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
     <rule comment="REGLA: NOM ADJ ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
        <rule comment="REGLA: DET NOM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
               <equal>
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="propio"/>
                </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="cualquier"/>
                  </equal>
                </test>
                <out>
                  <chunk name="quin_adj_nom_que_sia" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="quin"/>
                      </get-case-from>
                      <lit-tag v="adj.itg"/>
                      <clip pos="1" side="tl" part="gen" link-to="2"/>
                      <clip pos="1" side="tl" part="nbr" link-to="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="quite"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_nom"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b/>
                    <lu>
                      <lit v="que"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                    <b/>
                    <lu alt="oc">
                      <lit v="èsser"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                    <lu alt="oc@aran">
                      <lit v="èster"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="det_adj_nom" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_det"/>
                      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="1" side="tl" part="gen_mf"/>
                      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="1" side="tl" part="nbr_sp"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="quite"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_nom"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="cualquier"/>
                  </equal>
                </test>
                <out>
                  <chunk name="quin_nom_adj_que_sia" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="quin"/>
                      </get-case-from>
                      <lit-tag v="adj.itg"/>
                      <clip pos="1" side="tl" part="gen" link-to="2"/>
                      <clip pos="1" side="tl" part="nbr" link-to="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_nom"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="gen_mf"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="nbr_sp"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b/>
                    <lu>
                      <lit v="que"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                    <b/>
                    <lu alt="oc">
                      <lit v="èsser"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                    <lu alt="oc@aran">
                      <lit v="èster"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="det_nom_adj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_det"/>
                      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="1" side="tl" part="gen_mf"/>
                      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="1" side="tl" part="nbr_sp"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_nom"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="gen_mf"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="nbr_sp"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
      </action>
    </rule>
    
     <rule comment="REGLA: NUM NOM ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
               <equal>
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="propio"/>
                </equal>
            </test>
            <out>
              <chunk name="num_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_num"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="quite"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="num_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_num"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    <rule comment="REGLA: DET NOM ADV ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="cualquier"/>
              </equal>
            </test>
            <out>
              <chunk name="quin_nom_adv_adj_que_sia" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="quin"/>
                  </get-case-from>
                  <lit-tag v="adj.itg"/>
                  <clip pos="1" side="tl" part="gen" link-to="2"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="que"/>
                  <lit-tag v="cnjsub"/>
                </lu>
                <b/>
                <lu alt="oc">
                  <lit v="èsser"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
                <lu alt="oc@aran">
                  <lit v="èster"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_nom_adv_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
      <rule comment="REGLA: NUM NOM ADV ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
   
    <rule comment="REGLA: NOM ADJ cnjcoo ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="nom_adj_cnjcoo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="REGLA: DET NOM ADJ cnjcoo ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="cualquier"/>
              </equal>
            </test>
            <out>
              <chunk name="quin_nom_que_sia" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="quin"/>
                  </get-case-from>
                  <lit-tag v="adj.itg"/>
                  <clip pos="1" side="tl" part="gen" link-to="2"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_adj"/>
                  <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="5" side="tl" part="gen_mf"/>
                  <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="5" side="tl" part="nbr_sp"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="que"/>
                  <lit-tag v="cnjsub"/>
                </lu>
                <b/>
                <lu alt="oc">
                  <lit v="èsser"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
                <lu alt="oc@aran">
                  <lit v="èster"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_nom_adj_cnjcoo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_adj"/>
                  <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="5" side="tl" part="gen_mf"/>
                  <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="5" side="tl" part="nbr_sp"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="REGLA: DET ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="cualquier"/>
              </equal>
            </test>
            <out>
              <chunk name="quin_adj_nom_que_sia" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="quin"/>
                  </get-case-from>
                  <lit-tag v="adj.itg"/>
                  <clip pos="1" side="tl" part="gen" link-to="2"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="que"/>
                  <lit-tag v="cnjsub"/>
                </lu>
                <b/>
                <lu alt="oc">
                  <lit v="èsser"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
                <lu alt="oc@aran">
                  <lit v="èster"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
 <rule comment="REGLA: DET ADV ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="qualsevol"/>
              </equal>
            </test>
            <out>
              <chunk name="quin_adv_adj_nom_que_sia" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="quin"/>
                  </get-case-from>
                  <lit-tag v="adj.itg"/>
                  <clip pos="1" side="tl" part="gen" link-to="2"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="que"/>
                  <lit-tag v="cnjsub"/>
                </lu>
                <b/>
                <lu alt="oc">
                  <lit v="èsser"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
                <lu alt="oc@aran">
                  <lit v="èster"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_adv_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="REGLA: DET ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="cualquier"/>
              </equal>
            </test>
            <out>
              <chunk name="quin_adj_que_sia" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="quin"/>
                  </get-case-from>
                  <lit-tag v="adj.itg"/>
                  <clip pos="1" side="tl" part="gen" link-to="2"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="que"/>
                  <lit-tag v="cnjsub"/>
                </lu>
                <b/>
                <lu alt="oc">
                  <lit v="èsser"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
                <lu alt="oc@aran">
                  <lit v="èster"/>
                  <lit-tag v="vbser.prs.p3.sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    <rule comment="REGLA: DETNT ADJ">
<!-- (lo bonito: çò de polit) -->
      <pattern>
        <pattern-item n="detnt"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <not>
                <equal>
                  <clip pos="2" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </test>
            <let>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </let>
          </when>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </test>
            <let>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DETNT ADV ADJ">
<!--(lo más bonito: çò mai/mès polit' -->
      <pattern>
        <pattern-item n="detnt"/>
	<pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <not>
                <equal>
                  <clip pos="3" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </test>
            <let>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </let>
          </when>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </test>
            <let>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
	    <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="REGLA: DET ADJ cnjcoo ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="4" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="cualquier"/>
                  </equal>
                </test>
                <out>
                  <chunk name="quin_adj_cnjcoo_prep_adj_nom_sia" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="quin"/>
                      </get-case-from>
                      <lit-tag v="adj.itg"/>
                      <clip pos="1" side="tl" part="gen" link-to="2"/>
                      <clip pos="1" side="tl" part="nbr" link-to="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <lit v="de"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_adj"/>
                      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="4" side="tl" part="gen_mf"/>
                      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="4" side="tl" part="nbr_sp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_nom"/>
                      <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="5" side="tl" part="gen_mf"/>
                      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="5" side="tl" part="nbr_sp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b/>
                    <lu>
                      <lit v="que"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                    <b/>
                    <lu alt="oc">
                      <lit v="èsser"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                    <lu alt="oc@aran">
                      <lit v="èster"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="det_adj_cnjcoo_prep_adj_nom" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_det"/>
                      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="1" side="tl" part="gen_mf"/>
                      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="1" side="tl" part="nbr_sp"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <lit v="de"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_adj"/>
                      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="4" side="tl" part="gen_mf"/>
                      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="4" side="tl" part="nbr_sp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_nom"/>
                      <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="5" side="tl" part="gen_mf"/>
                      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="5" side="tl" part="nbr_sp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="cualquier"/>
                  </equal>
                </test>
                <out>
                  <chunk name="quin_adj_cnjcoo_adj_nom_que_sia" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="quin"/>
                      </get-case-from>
                      <lit-tag v="adj.itg"/>
                      <clip pos="1" side="tl" part="gen" link-to="2"/>
                      <clip pos="1" side="tl" part="nbr" link-to="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_adj"/>
                      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="4" side="tl" part="gen_mf"/>
                      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="4" side="tl" part="nbr_sp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_nom"/>
                      <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="5" side="tl" part="gen_mf"/>
                      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="5" side="tl" part="nbr_sp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                    <b/>
                    <lu>
                      <lit v="que"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                    <b/>
                    <lu alt="oc">
                      <lit v="èsser"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                    <lu alt="oc@aran">
                      <lit v="èster"/>
                      <lit-tag v="vbser.prs.p3.sg"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="det_adj_cnjcoo_adj_nom" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_det"/>
                      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="1" side="tl" part="gen_mf"/>
                      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="1" side="tl" part="nbr_sp"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_adj"/>
                      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="4" side="tl" part="gen_mf"/>
                      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="4" side="tl" part="nbr_sp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_nom"/>
                      <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="5" side="tl" part="gen_mf"/>
                      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="5" side="tl" part="nbr_sp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
      </action>
    </rule>    
    
    <rule comment="REGLA: NUM ADV ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="num_adv_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
     <rule comment="REGLA: NUM ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="REGLA: NUM ADJ cnj  ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="4" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <out>
              <chunk name="num_adj_cnjcoo_prep_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="5" side="tl" part="gen_mf"/>
                  <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="5" side="tl" part="nbr_sp"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="num_adj_cnjcoo_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_num"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="5" side="tl" part="gen_mf"/>
                  <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="5" side="tl" part="nbr_sp"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>


      <rule comment="REGLA: ADJ NOM">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or alt="oc">
                <in caseless="yes">
                  <clip pos="2" side="tl" part="lem"/>
                  <list n="part_sing"/>
                </in>
                <and>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="otro"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                </and>
              </or>
              <equal caseless="yes" alt="oc@aran">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema"/>
              <lit v="partadj_nom"/>
            </let>
            <let alt="oc@aran">
              <var n="lema"/>
              <lit v="partadj_nom_aran"/>
            </let>
            <out>
              <chunk namefrom="lema" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    <rule comment="REGLA: ADJ ADJ NOM">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <out>
              <chunk name="adj_prep_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or alt="oc">
                    <in caseless="yes">
                      <clip pos="3" side="tl" part="lem"/>
                      <list n="part_sing"/>
                    </in>
                    <and>
                      <equal caseless="yes">
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="otro"/>
                      </equal>
                      <equal>
                        <clip pos="1" side="sl" part="nbr"/>
                        <lit-tag v="sg"/>
                      </equal>
                    </and>
                  </or>
                  <equal caseless="yes" alt="oc@aran">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="otro"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema"/>
                  <lit v="partadj_adj_nom"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema"/>
                  <lit v="partadj_adj_nom_aran"/>
                </let>
                <out>
                  <chunk namefrom="lema" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_adj"/>
                      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="1" side="tl" part="gen_mf"/>
                      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="1" side="tl" part="nbr_sp"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_nom"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="gen_mf"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="nbr_sp"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adj_adj_nom" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_adj"/>
                      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="1" side="tl" part="gen_mf"/>
                      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="1" side="tl" part="nbr_sp"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_nom"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="gen_mf"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="nbr_sp"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>

 <rule comment="REGLA: PREADV ADJ NOM">
      <pattern>
        <pattern-item n="preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>       
            <out>
              <chunk name="adv_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
		<lu>		  
                  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
       
    
    <rule comment="REGLA: ADV ADJ NOM">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
          <when>
            <test>
              <or alt="oc">
                <in caseless="yes">
                  <clip pos="3" side="tl" part="lem"/>
                  <list n="part_sing"/>
                </in>
                <and>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="otro"/>
                  </equal>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                </and>
              </or>
              <equal caseless="yes" alt="oc@aran">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema"/>
              <lit v="partadj_nom"/>
            </let>
            <let alt="oc@aran">
              <var n="lema"/>
              <lit v="partadj_nom_aran"/>
            </let>
            <out>
              <chunk namefrom="lema" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
  <rule comment="REGLA:ADV ADJ ADJ NOM">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <out>
              <chunk name="adj_prep_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or alt="oc">
                    <in caseless="yes">
                      <clip pos="4" side="tl" part="lem"/>
                      <list n="part_sing"/>
                    </in>
                    <and>
                      <equal caseless="yes">
                        <clip pos="2" side="sl" part="lem"/>
                        <lit v="otro"/>
                      </equal>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sg"/>
                      </equal>
                    </and>
                  </or>
                  <equal caseless="yes" alt="oc@aran">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="otro"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema"/>
                  <lit v="partadj_nom"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema"/>
                  <lit v="partadj_nom_aran"/>
                </let>
                <out>
                  <chunk namefrom="lema" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="gen_mf"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="nbr_sp"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_nom"/>
                      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="4" side="tl" part="gen_mf"/>
                      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="4" side="tl" part="nbr_sp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adj_adj_nom" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                      <tag><var n="tipusnom"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="2" side="tl" part="gen_mf"/>
                      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="2" side="tl" part="nbr_sp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="3" side="tl" part="gen_mf"/>
                      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="3" side="tl" part="nbr_sp"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_nom"/>
                      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                      <clip pos="4" side="tl" part="gen_mf"/>
                      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                      <clip pos="4" side="tl" part="nbr_sp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
 
 <rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda)">
      <pattern>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema"/>
              <lit v="part"/>
            </let>
            <let alt="oc@aran">
              <var n="lema"/>
              <lit v="part_aran"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema"/>
              <lit v="adj"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
 <rule comment="REGLA: ADV ADJECTIU">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema"/>
              <lit v="part"/>
            </let>
            <let alt="oc@aran">
              <var n="lema"/>
              <lit v="part_aran"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema"/>
              <lit v="adj"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: ADV ADJECTIU ADJECTIU">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="otro"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema"/>
              <lit v="part"/>
            </let>
            <let alt="oc@aran">
              <var n="lema"/>
              <lit v="part_aran"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema"/>
              <lit v="adj"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="lema"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    <rule comment="REGLA: DET(quan no acompanya res o va amb desconeguda)">
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="DET"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="REGLA: que relativo (en un chunk a part)">
      <pattern>
        <pattern-item n="querel"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="que" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="querel"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_rel"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
<!-- *************************************** REGLES DE SV *********************************************** --> 
  
    <rule comment="REGLA: adv estar ger">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="verb"/>
            </let>
          </otherwise>
        </choose>
        <out alt="oc">
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <get-case-from pos="1">
                <clip pos="3" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv" alt="oc">
          <with-param pos="1"/>
        </call-macro>
        <out alt="oc">
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="3">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="lema_sv">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="posa_adv" alt="oc@aran">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    
    
    <rule comment="REGLA: adv VERB">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="verb"/>
            </let>
          </otherwise>
        </choose>
        <out alt="oc">
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv" alt="oc">
          <with-param pos="1"/>
        </call-macro>
        <out alt="oc">
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="lema_sv">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv" alt="oc@aran">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    <rule comment="REGLA: VERB">
      <pattern>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="verb"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
        <rule comment="REGLA: estar ger">
      <pattern>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="verb"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    <rule comment="adv aux + estado + ger">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar" alt="oc">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="proaux_adv_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="aux_adv_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="proaux_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="aux_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose alt="oc">
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv" alt="oc">
              <with-param pos="1"/>
            </call-macro>
            <out alt="oc">
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk namefrom="lema_sv">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc@aran">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
      </action>
    </rule>

    
    
    <rule comment="REGLA: aux estado ger">
      <pattern>
        <pattern-item n="auxpers"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="proaux_pp"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="aux_pp"/>
            </let>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </equal>
            </test>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen_pp"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr_pp"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_pp"/>
                  <clip pos="2" side="tl" part="gen" link-to="5"/>
                  <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr_pp"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_pp"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule> 
    
    
    <rule comment="adv prnpro auxpers + estado + ger">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_proaux_adv_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_aux_adv_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_proaux_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_aux_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose alt="oc">
              <when>
                <test>
                  <equal>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv" alt="oc">
              <with-param pos="1"/>
            </call-macro>
            <out alt="oc">
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk namefrom="lema_sv">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc@aran">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
   
    
    <rule comment="REGLA: prnpro aux estado ger">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proaux_pp"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_aux_pp"/>
            </let>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </equal>
            </test>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="gen_pp"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr_pp"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>  <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen" link-to="5"/>
                  <clip pos="3" side="tl" part="nbr" link-to="6"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>  
		  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
	
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    <rule comment="REGLA: ger : en ger">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <lit v="tot"/>
              <lit-tag v="predet.m.sg"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk name="ger" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    <rule comment="REGLA: adv ger : adv en ger">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="ger">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <lit v="tot"/>
              <lit-tag v="predet.m.sg"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc">
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    <rule comment="prnpro">
<!--per quan va seguit d'un verb desconegut -->
      <pattern>
        <pattern-item n="prnpro"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="prnpro"/></tag>
              <tag><clip pos="1" side="tl" part="tipoenc_pro"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>             
              <clip pos="1" side="tl" part="tipoenc_pro"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_verb"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="1" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>



    <rule comment="adv prnpro verbpers">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_verb"/>
            </let>
          </otherwise>
        </choose>
        <out alt="oc">
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps" link-to="3"/>
              <clip pos="3" side="tl" part="pers" link-to="4"/>
              <clip pos="3" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv" alt="oc">
          <with-param pos="1"/>
        </call-macro>
        <out alt="oc">
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="3">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="lema_sv">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps" link-to="3"/>
              <clip pos="3" side="tl" part="pers" link-to="4"/>
              <clip pos="3" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv" alt="oc@aran">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    
    <rule comment="prnpro estar ger">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_verb"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="1" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    <rule comment="adv prnpro estar ger">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_verb"/>
            </let>
          </otherwise>
        </choose>
        <out alt="oc">
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps" link-to="3"/>
              <clip pos="3" side="tl" part="pers" link-to="4"/>
              <clip pos="3" side="tl" part="nbr" link-to="5"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv" alt="oc">
          <with-param pos="1"/>
        </call-macro>
        <out alt="oc">
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="3">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="lema_sv">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps" link-to="3"/>
              <clip pos="3" side="tl" part="pers" link-to="4"/>
              <clip pos="3" side="tl" part="nbr" link-to="5"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="posa_adv" alt="oc@aran">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
  
  
    <rule comment="estar ger-enc">
      <pattern>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
	  <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_verb"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/><!-- GR: comentar a carme que ho canvie de 1 a 2-->
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    
    <rule comment="adv estar ger-enc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proverb"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_verb"/>
            </let>
          </otherwise>
        </choose>
        <let>
          <clip pos="4" side="tl" part="tipus_prn"/>
          <lit-tag v="pro"/>
        </let>
        <out alt="oc">
          <chunk namefrom="lema_sv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="4" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/><!-- GR: comentar a carme que ho canvie de 2 a 3-->
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv" alt="oc">
          <with-param pos="1"/>
        </call-macro>
        <out alt="oc">
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="3">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="lema_sv">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/><!-- GR: comentar a carme que ho canvie de 2 a 3-->
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="posa_adv" alt="oc@aran">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    <rule comment="prnpro prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps" link-to="3"/>
              <clip pos="3" side="tl" part="pers" link-to="4"/>
              <clip pos="3" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    
    <rule comment="adv prnpro prnpro verbpers">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <out alt="oc">
          <chunk name="pro_pro_verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps" link-to="3"/>
              <clip pos="4" side="tl" part="pers" link-to="4"/>
              <clip pos="4" side="tl" part="nbr" link-to="5"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="pro_pro_verb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps" link-to="3"/>
              <clip pos="4" side="tl" part="pers" link-to="4"/>
              <clip pos="4" side="tl" part="nbr" link-to="5"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="estar ger prnenc prnenc">
      <pattern>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="3" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="adv estar ger prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="verbs_amb_ger"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out alt="oc">
          <chunk name="pro_pro_verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="4" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="pro_pro_verb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="4" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: INF">
      <pattern>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
<!--com a sn és sg ("cantar és important") -->
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    

    <rule comment="inf enc">
      <pattern>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="inf_enc" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
<!--com a sn és sg ("cantar és important") -->
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="whole"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
	  <chunk name="pro_inf" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
<!--com a sn és sg ("cantar és important") -->
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    

    <rule comment="adv inf enc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose alt="oc">
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="lem"/>
              <lit v="pas"/>
            </let>
          </when>
        </choose>
        <out alt="oc">
          <chunk name="pro_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
              <lu>
                <get-case-from pos="1">
                  <clip pos="3" side="tl" part="lemh"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
              </lu>
              <b/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="pers"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="inf_enc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="pers"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="inf prnenc prnenc">
      <pattern>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="inf_enc_enc" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="whole"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
	  
          <chunk name="pro_pro_inf" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lemh"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    

    
    <rule comment="adv inf prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose alt="oc">
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="lem"/>
              <lit v="pas"/>
            </let>
          </when>
        </choose>
        <out alt="oc">
          <chunk name="pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
	    
            <lu>
              <get-case-from pos="1">
                <clip pos="3" side="tl" part="lemh"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="inf_enc_enc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="pers"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
              </lu>
              <lu>
                <clip pos="4" side="tl" part="whole"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="adv prep inf prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prep"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="lema"/>
          <clip pos="2" side="sl" part="lem"/>
        </let>
        <out alt="oc">
          <chunk namefrom="lema" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="pro_pro_inf">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
             <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="lema">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="inf_enc_enc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="pers"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="4" side="tl" part="whole"/>
              </lu>
              <lu>
                <clip pos="5" side="tl" part="whole"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    
       
    <rule comment="ger prnenc">
      <pattern>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
          <out>
          <chunk name="pro_ger" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
	    <get-case-from pos="2">
              <clip pos="1" side="tl" part="lemh"/>
            </get-case-from>
	      <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk name="ger_enc" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="tot"/>
              </get-case-from>
              <lit-tag v="predet.m.sg"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="inf"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="whole"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="adv ger prnenc">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out alt="oc">
          <chunk name="pro_ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="3">
                <clip pos="2" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="ger_enc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="3">
                <lit v="tot"/>
              </get-case-from>
              <lit-tag v="predet.m.sg"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <get-case-from pos="3">
                  <clip pos="2" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="2" side="tl" part="a_verb"/>
                <lit-tag v="inf"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    <rule comment="ger prnenc prnenc">
      <pattern>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <let alt="oc">
          <clip pos="2" side="tl" part="tipus_prn"/>
          <lit-tag v="pro"/>
        </let>
        <let alt="oc">
          <clip pos="3" side="tl" part="tipus_prn"/>
          <lit-tag v="pro"/>
        </let>
        <out>
          <chunk name="pro_pro_ger" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk name="ger_enc_enc" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="tot"/>
              </get-case-from>
              <lit-tag v="predet.m.sg"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="inf"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="whole"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="adv ger prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out alt="oc">
          <chunk name="pro_pro_ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="3">
                <clip pos="2" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="ger_enc_enc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <lit v="en"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="3">
                <lit v="tot"/>
              </get-case-from>
              <lit-tag v="predet.m.sg"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="a_verb"/>
                <lit-tag v="inf"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
              </lu>
              <lu>
                <clip pos="4" side="tl" part="whole"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="imp prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="imp_enc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="adv imp prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out alt="oc">
          <chunk name="imp_enc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="pers"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="imp_enc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="pers"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="imp prnenc prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="imp_enc_enc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="adv imp prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out alt="oc">
          <chunk name="imp_enc_enc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="pers"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
              </lu>
              <lu>
                <clip pos="4" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="4" side="tl" part="tipoenc_pro"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <out alt="oc@aran">
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="imp_enc_enc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="pers"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
              </lu>
              <lu>
                <clip pos="4" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="4" side="tl" part="tipoenc_pro"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    
    <rule comment="aux + pp">
      <pattern>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar" alt="oc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="proaux_pp"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="aux_pp"/>
            </let>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </equal>
            </test>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen_pp"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr_pp"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_pp"/>
                  <clip pos="2" side="tl" part="gen" link-to="5"/>
                  <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr_pp"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_pp"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    <rule comment="adv aux + pp">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar" alt="oc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="proaux_adv_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="aux_adv_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="proaux_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="aux_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose alt="oc">
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv" alt="oc">
              <with-param pos="1"/>
            </call-macro>
            <out alt="oc">
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk namefrom="lema_sv">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc@aran">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="auxpers + pp adv">
      <pattern>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar" alt="oc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="proaux_adv_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="aux_adv_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps" link-to="3"/>
                      <clip pos="1" side="tl" part="pers" link-to="4"/>
                      <clip pos="1" side="tl" part="nbr" link-to="6"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_pp"/>
                      <clip pos="2" side="tl" part="gen" link-to="5"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <get-case-from pos="3">
                        <clip pos="1" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps" link-to="3"/>
                      <clip pos="1" side="tl" part="pers" link-to="4"/>
                      <clip pos="1" side="tl" part="nbr" link-to="6"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_pp"/>
                      <clip pos="2" side="tl" part="gen" link-to="5"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="proaux_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="aux_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps" link-to="3"/>
                      <clip pos="1" side="tl" part="pers" link-to="4"/>
                      <clip pos="1" side="tl" part="nbr" link-to="6"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_pp"/>
                      <clip pos="2" side="tl" part="gen" link-to="5"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps" link-to="3"/>
                      <clip pos="1" side="tl" part="pers" link-to="4"/>
                      <clip pos="1" side="tl" part="nbr" link-to="6"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_pp"/>
                      <clip pos="2" side="tl" part="gen" link-to="5"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>


    <rule comment="prnpro auxpers + pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_proaux_pp"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="lema_sv"/>
              <lit v="pro_aux_pp"/>
            </let>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </equal>
            </test>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen" link-to="5"/>
                  <clip pos="3" side="tl" part="nbr" link-to="6"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    
    <rule comment="adv prnpro auxpers + pp">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_proaux_adv_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_aux_adv_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_proaux_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_aux_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose alt="oc">
              <when>
                <test>
                  <equal>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv" alt="oc">
              <with-param pos="1"/>
            </call-macro>
            <out alt="oc">
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk namefrom="lema_sv">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc@aran">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
   
    
    <rule comment="prnpro auxpers + pp adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="4" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_proaux_adv_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_aux_adv_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_proaux_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema_sv"/>
                  <lit v="pro_aux_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk namefrom="lema_sv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="prnpro_afegit"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps" link-to="3"/>
                      <clip pos="2" side="tl" part="pers" link-to="4"/>
                      <clip pos="2" side="tl" part="nbr" link-to="6"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <clip pos="3" side="tl" part="gen" link-to="5"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    <rule comment="prnpro prnpro auxpers pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="gen"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="6"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen" link-to="5"/>
                  <clip pos="4" side="tl" part="nbr" link-to="6"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="adv prnpro prnpro auxpers pp">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="5" side="tl" part="gen"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps" link-to="3"/>
                      <clip pos="4" side="tl" part="pers" link-to="4"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen" link-to="5"/>
                      <clip pos="5" side="tl" part="nbr" link-to="6"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="5" side="tl" part="gen"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps" link-to="3"/>
                      <clip pos="4" side="tl" part="pers" link-to="4"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen" link-to="5"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose alt="oc">
              <when>
                <test>
                  <equal>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="5" side="tl" part="gen"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
       		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps" link-to="3"/>
                      <clip pos="4" side="tl" part="pers" link-to="4"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen" link-to="5"/>
                      <clip pos="5" side="tl" part="nbr" link-to="6"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="5" side="tl" part="gen"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps" link-to="3"/>
                      <clip pos="4" side="tl" part="pers" link-to="4"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen" link-to="5"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out alt="oc">
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_aux_pp">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="4" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps" link-to="3"/>
                  <clip pos="4" side="tl" part="pers" link-to="4"/>
                  <clip pos="4" side="tl" part="nbr" link-to="5"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="prnpro prnpro auxpers pp adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="5" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </equal>
                </test>
                <out>
                  <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr" link-to="6"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="cv_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps" link-to="3"/>
                      <clip pos="3" side="tl" part="pers" link-to="4"/>
                      <clip pos="3" side="tl" part="nbr" link-to="6"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen" link-to="5"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="5" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
   
    <rule comment="auxinf + pp">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar" alt="oc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="auxinf_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    
    
    <rule comment="adv auxinf + pp">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar" alt="oc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out>
              <chunk name="auxinf_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/>
		  </tag>
		  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out alt="oc">
              <chunk name="auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
		  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="auxinf_pp">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
		  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>


    <rule comment="auxinf + pp adv">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar" alt="oc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out>
              <chunk name="auxinf_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_pp"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
		  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_pp"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    
    <rule comment="auxinf-enc pp"><!--GR: comentar canvi encl. a carme-->
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
	
	  <out>
          <chunk name="auxinf_enc_pp" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="whole"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
	    <b pos="1"/>
	    <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_pp"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
	  <chunk name="pro_auxinf_pp" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
	    <b pos="1"/>
	    <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_pp"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    
    <rule comment="adv auxinf-enc pp">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out alt="oc@aran">
              <chunk name="auxinf_enc_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
	    <out alt="oc">
            <chunk name="pro_auxinf_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
                </tags> 
		  <lu>
		    <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/>
                  <lu>
		    <get-case-from pos="2">
                    <clip pos="2" side="tl" part="lem"/>
		    </get-case-from>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out alt="oc">
              <chunk name="pro_auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
                </tags> 
		  <lu>
		    <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/>
                  <lu>
		    <get-case-from pos="2">
                    <clip pos="2" side="tl" part="lem"/>
		    </get-case-from>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="auxinf_enc_pp">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
              <tag><var n="cv_verb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="auxinf-enc pp adv">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="4" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out alt="oc">
              <chunk name="auxinf_enc_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="1" side="tl" part="lem"/>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
	    <out alt="oc">
              <chunk name="pro_auxinf_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
		 <lu>
		    <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/>
                  <lu>
		    <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
		    </get-case-from>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out alt="oc@aran">
              <chunk name="auxinf_enc_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="1" side="tl" part="lem"/>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc">
              <chunk name="pro_auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
		<lu>
		    <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/>
                  <lu>
		    <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
		    </get-case-from>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
 
    
    <rule comment="adv auxinf-enc-enc pp">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out alt="oc@aran">
              <chunk name="auxinf_enc_enc_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc">
              <chunk name="pro_pro_auxinf_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
		 <lu>
		    <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/> 
		  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.pro"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <b/>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="1"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out alt="oc">
              <chunk name="pro_pro_auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
		 <lu>
		    <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/> 
		  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.pro"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <b/>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="auxinf_enc_enc_pp">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps" link-to="3"/>
                    <clip pos="2" side="tl" part="pers" link-to="4"/>
                    <clip pos="2" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
    <rule comment="auxinf-enc-enc pp adv">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="5" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out alt="oc@aran">
              <chunk name="auxinf_enc_enc_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
		<mlu>
                  <lu>
                    <clip pos="1" side="tl" part="lem"/>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc">
              <chunk name="pro_pro_auxinf_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
		 <lu>
		    <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/> 
		  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.pro"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <b/>
                  <lu>
		    <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
		    </get-case-from>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out alt="oc@aran">
              <chunk name="auxinf_enc_enc_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="1" side="tl" part="lem"/>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="5" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out> 
	    <out alt="oc">
	    <chunk name="pro_pro_auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
		 <lu>
		    <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
		    </get-case-from>
                    <lit-tag v="prn.pro"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                  </lu>
		  <b/> 
		  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.pro"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  <b/>
                  <lu>
		    <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
		    </get-case-from>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps" link-to="3"/>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                    <clip pos="1" side="tl" part="nbr" link-to="6"/>
                  </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="5" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="auxinf-enc-enc pp">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro" alt="oc">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="auxinf_enc_enc_pp" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>   
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk name="pro_pro_auxinf_pp" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>   
	      <tag><var n="cv_verb"/></tag>
            </tags>
	      <lu>
		<get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
		</get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
              </lu>
	    <b/> 
	      <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
              </lu>
            <b/>
              <lu>
		<get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    
    <rule comment="REGLA: ir a INF">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema_sv"/>
              <lit v="proir_inf"/>
            </let>
            <let alt="oc@aran">
              <var n="lema_sv"/>
              <lit v="proir_a_inf"/>
            </let>
          </when>
          <otherwise>
            <let alt="oc">
              <var n="lema_sv"/>
              <lit v="ir_inf"/>
            </let>
            <let alt="oc@aran">
              <var n="lema_sv"/>
              <lit v="ir_a_inf"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag> 
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag> 
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
      </action>
    </rule>


    <rule comment="REGLA: pro ir a INF">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema_sv"/>
              <lit v="pro_proir_inf"/>
            </let>
            <let alt="oc@aran">
              <var n="lema_sv"/>
              <lit v="pro_proir_a_inf"/>
            </let>
          </when>
          <otherwise>
            <let alt="oc">
              <var n="lema_sv"/>
              <lit v="pro_ir_inf"/>
            </let>
            <let alt="oc@aran">
              <var n="lema_sv"/>
              <lit v="pro_ir_a_inf"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag> 
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="pers"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag> 
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="prnpro_afegit"/>
            </lu>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="pers"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="posa_adv">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
      </action>
    </rule>

    <rule comment="REGLA: pro pro ir a INF">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_ir_a_inf" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag> 
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps" link-to="3"/>
              <clip pos="3" side="tl" part="pers" link-to="4"/>
              <clip pos="3" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="pers"/>
              <clip pos="5" side="tl" part="nbr"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk name="pro_pro_ir_a_inf" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag> 
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps" link-to="3"/>
              <clip pos="3" side="tl" part="pers" link-to="4"/>
              <clip pos="3" side="tl" part="nbr" link-to="5"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="pers"/>
              <clip pos="5" side="tl" part="nbr"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
      </action>
    </rule>

    <rule comment="REGLA: ir a INF-enc">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="afegeix_prn"/>
                <lit v="si"/>
              </equal>
            </test>
            <let alt="oc">
              <var n="lema_sv"/>
              <lit v="pro_proir_inf"/>
            </let>
            <let alt="oc@aran">
              <var n="lema_sv"/>
              <lit v="pro_proir_a_inf"/>
            </let>
          </when>
          <otherwise>
            <let alt="oc">
              <var n="lema_sv"/>
              <lit v="pro_ir_inf"/>
            </let>
            <let alt="oc@aran">
              <var n="lema_sv"/>
              <lit v="pro_ir_a_inf"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk name="pro_ir_inf" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
	    <get-case-from pos="1">
              <clip pos="4" side="tl" part="lem"/>
	    </get-case-from>
	      <lit-tag v="prn.pro"/>
	      <clip pos="4" side="tl" part="tipoenc_pro"/> 
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk name="ir_a_inf_enc" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
	    <mlu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
	      <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    </mlu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: ir a INF-enc-enc">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_ir_a_inf" case="caseFirstWord" alt="oc">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <chunk name="ir_a_inf_enc_enc" case="caseFirstWord" alt="oc@aran">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="pers" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
	    <mlu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
	     <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	     <lu>
              <clip pos="5" side="tl" part="whole"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    </mlu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a INF">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="proir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="proir_adv_a_inf"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="ir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="ir_adv_a_inf"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	          <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
		<get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
		</get-case-from>  
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
		<get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
		</get-case-from>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
		  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="proir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="proir_a_inf"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="ir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="ir_a_inf"/>
                </let>
              </otherwise>
            </choose>
            <out alt="oc">
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc">
              <with-param pos="1"/>
            </call-macro>
            <out alt="oc">
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk namefrom="lema_sv">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc@aran">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ir a INF adv">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="4" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="proir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="proir_adv_a_inf"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="ir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="ir_adv_a_inf"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="proir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="proir_a_inf"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="ir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="ir_a_inf"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="4" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv pro ir a INF">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_adv_a_inf"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_adv_a_inf"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>  
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>  
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <out alt="oc">
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc">
              <with-param pos="1"/>
            </call-macro>
            <out alt="oc">
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk namefrom="lema_sv">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc@aran">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    <rule comment="REGLA: pro ir a INF adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="5" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_adv_a_inf"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_adv_a_inf"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="5" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
      </action>
    </rule>


    <rule comment="REGLA: adv pro pro ir a INF">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="6"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out>
              <chunk name="pro_pro_ir_adv_inf" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="4" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps" link-to="3"/>
                  <clip pos="4" side="tl" part="pers" link-to="4"/>
                  <clip pos="4" side="tl" part="nbr" link-to="5"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>  
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="6" side="tl" part="lemh"/>
                  <clip pos="6" side="tl" part="a_verb"/>
                  <clip pos="6" side="tl" part="temps"/>
                  <clip pos="6" side="tl" part="pers"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <clip pos="6" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk name="pro_pro_ir_adv_a_inf" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="4" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps" link-to="3"/>
                  <clip pos="4" side="tl" part="pers" link-to="4"/>
                  <clip pos="4" side="tl" part="nbr" link-to="5"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="6" side="tl" part="lemh"/>
                  <clip pos="6" side="tl" part="a_verb"/>
                  <clip pos="6" side="tl" part="temps"/>
                  <clip pos="6" side="tl" part="pers"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <clip pos="6" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out alt="oc">
              <chunk name="pro_pro_ir_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="4" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps" link-to="3"/>
                  <clip pos="4" side="tl" part="pers" link-to="4"/>
                  <clip pos="4" side="tl" part="nbr" link-to="5"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lemh"/>
                  <clip pos="6" side="tl" part="a_verb"/>
                  <clip pos="6" side="tl" part="temps"/>
                  <clip pos="6" side="tl" part="pers"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <clip pos="6" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>  
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_ir_adv_a_inf">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="4" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps" link-to="3"/>
                  <clip pos="4" side="tl" part="pers" link-to="4"/>
                  <clip pos="4" side="tl" part="nbr" link-to="5"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="6" side="tl" part="lemh"/>
                  <clip pos="6" side="tl" part="a_verb"/>
                  <clip pos="6" side="tl" part="temps"/>
                  <clip pos="6" side="tl" part="pers"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <clip pos="6" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>
      </action>
    </rule>


    <rule comment="REGLA: pro pro ir a INF adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="6" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out>
              <chunk name="pro_pro_ir_adv_inf" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk name="pro_pro_ir_adv_a_inf" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_pro_ir_inf" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk name="pro_pro_ir_adv_a_inf" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps" link-to="3"/>
                  <clip pos="3" side="tl" part="pers" link-to="4"/>
                  <clip pos="3" side="tl" part="nbr" link-to="5"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="5"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="6" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond" alt="oc">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a INF-enc">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="proir_adv_a_inf_enc"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="ir_adv_a_inf_enc"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="5" side="tl" part="lem"/>
		</get-case-from> 
		<lit-tag v="prn.pro"/>
		<clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
		<mlu>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
       	          <clip pos="4" side="tl" part="lemq"/>
                </lu>             
		</mlu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="proir_a_inf_enc"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="ir_a_inf_enc"/>
                </let>
              </otherwise>
            </choose>
            <out alt="oc">
              <chunk namefrom="lema_sv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="5" side="tl" part="lem"/>
		</get-case-from> 
		<lit-tag v="prn.pro"/>
		<clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc">
              <with-param pos="1"/>
            </call-macro>
            <out alt="oc">
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk namefrom="lema_sv">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <mlu>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
       	          <clip pos="4" side="tl" part="lemq"/>
                </lu>             
		</mlu>
              </chunk>
            </out>
            <call-macro n="posa_adv" alt="oc@aran">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>
    
    
    <rule comment="REGLA: ir a INF-enc adv">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="posa_prn_compost">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>       
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="5" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_adv_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="proir_adv_a_inf_enc"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="4" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
		<clip pos="4" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
	      </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
		<mlu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
		<lu>
                  <clip pos="4" side="tl" part="whole"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
		</mlu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="afegeix_prn"/>
                    <lit v="si"/>
                  </equal>
                </test>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="pro_proir_a_inf"/>
                </let>
              </when>
              <otherwise>
                <let alt="oc">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_inf"/>
                </let>
                <let alt="oc@aran">
                  <var n="lema_sv"/>
                  <lit v="pro_ir_a_inf"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="4" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
		<clip pos="4" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="1"/>
                <lu>
                  <var n="prnpro_afegit"/>
                </lu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk namefrom="lema_sv" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
		<mlu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
		<lu>
                  <clip pos="4" side="tl" part="whole"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
		</mlu>
              </chunk>
            </out>
            <call-macro n="posa_adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="5" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="elcual_prep"/>
          <lit v=""/>
        </let>
        <let>
          <var n="prnpro_afegit"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a INF-enc-enc">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out>
              <chunk name="pro_pro_ir_adv_inf" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="5" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
		<clip pos="5" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
		  <lit-tag v="prn.pro"/>
		  <clip pos="6" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk name="ir_adv_a_inf_enc_enc" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
		<mlu>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
		<lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
		<lu>
                  <clip pos="6" side="tl" part="whole"/>
                </lu>
		</mlu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out alt="oc">
              <chunk name="pro_pro_ir_adv_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="5" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
		<clip pos="5" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b/>
                <lu>
		<clip pos="6" side="tl" part="lem"/>
		<lit-tag v="prn.pro"/>
		<clip pos="6" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
		<get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
		</get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <out alt="oc@aran">
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="ir_adv_a_inf_enc_enc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
		<mlu>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
		<lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
		<lu>
                  <clip pos="6" side="tl" part="whole"/>
                </lu>
		</mlu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>



    <rule comment="REGLA: ir a INF-enc-enc adv">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="verb_ref_mod">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="6" side="tl" part="lem"/>
                <list n="adv_mig"/>
              </in>
            </test>
            <out>
              <chunk name="pro_pro_ir_adv_inf" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="4" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
		<clip pos="4" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
		  <lit-tag v="prn.pro"/>
		  <clip pos="5" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk name="ir_adv_a_inf_enc_enc" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="5"/>
		<mlu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
		<lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
		<lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
		</mlu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_pro_ir_adv_inf" case="caseFirstWord" alt="oc">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
		<get-case-from pos="1">
                  <clip pos="4" side="tl" part="lem"/>
		</get-case-from>
		<lit-tag v="prn.pro"/>
		<clip pos="4" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
		  <lit-tag v="prn.pro"/>
		  <clip pos="5" side="tl" part="tipoenc_pro"/> 
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <chunk name="ir_adv_a_inf_enc_enc" case="caseFirstWord" alt="oc@aran">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
	      <tag><var n="cv_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps" link-to="3"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
		<mlu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
		<lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
		<lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
		</mlu>
              </chunk>
              <b pos="5"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="6" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
 
<!--************************************ ALTRES ************************************************ -->
    <rule comment="ADV">
      <pattern>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="no" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    <rule comment="ADV ADV">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lex_adv">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv_adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="PRN personal que pot ser subjecte">
      <pattern>
        <pattern-item n="prnperssubj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="usted">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prnperssubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="prn.tn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="pronomsubj"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="5"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="6"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="PRN no personal que pot ser subjecte">
      <pattern>
        <pattern-item n="prnsubj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prnsubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn_chunk"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="3"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="4"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="PRNITG">
      <pattern>
        <pattern-item n="prnitg"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prnitg" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn_chunk"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
     <rule comment="PREP REL">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="el_cual"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="cv_prep">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="elcual_prep"/>
          <clip pos="1" side="tl" part="lem"/>
        </let>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="tl" part="lem"/>
                <lit v="el cual"/>
              </equal>
            </test>
            <let>
              <var n="elcual_gen"/>
              <clip pos="2" side="tl" part="gen"/>
            </let>
            <let>
              <var n="elcual_nbr"/>
              <clip pos="2" side="tl" part="nbr"/>
            </let>
          </when>
          <otherwise>
            <let>
              <var n="elcual_gen"/>
              <lit-tag v="m"/>
            </let>
            <let>
              <var n="elcual_nbr"/>
              <lit-tag v="sg"/>
            </let>
          </otherwise>
        </choose>
        <out>
          <chunk name="el_cual" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="REL"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn_chunk"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="tipusrel"/></tag>
              <tag><var n="elcual_prep"/></tag>
            </tags>
            <lu>
              <lit v="que"/>
              <lit-tag v="rel.an.mf.sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
      </action>
    </rule>
    <rule comment="PRNREL">
      <pattern>
        <pattern-item n="rel"/>
      </pattern>
      <action>
        <call-macro n="tipus_rel">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="REL"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn_chunk"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusrel"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="cnjcoo">
      <pattern>
        <pattern-item n="cnjcoo"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="cnjcoo" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="CNJ">
      <pattern>
        <pattern-item n="cnj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="cnj" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="PREP">
      <pattern>
        <pattern-item n="prep"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="cv_prep2">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="lema"/>
          <clip pos="1" side="sl" part="lem"/>
        </let>
        <out>
          <chunk namefrom="lema" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="NUMERAL">
      <pattern>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="1"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="2"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
 <rule comment="ij">
      <pattern>
        <pattern-item n="ij"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ij" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="ij"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="advitg">
      <pattern>
        <pattern-item n="advitg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="advitg" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="advitg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule>
<!-- REGLA: reset variables-->
      <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <let>
          <var n="numero"/>
          <lit-tag v="sg"/>
        </let>
        <let>
          <var n="genero"/>
          <lit-tag v="m"/>
        </let>
        <let>
          <var n="tipusverb"/>
          <lit v=""/>
        </let>
        <let>
          <var n="afegeix_prn"/>
          <lit v="no"/>
        </let>
        <choose>
          <when>
            <test>
              <not>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=";"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=":"/>
                  </equal>
                </or>
              </not>
            </test>
            <let>
              <var n="EOS"/>
              <lit v="true"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="punt">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: coma-->
      <pattern>
        <pattern-item n="coma"/>
      </pattern>
      <action>
        <out>
          <chunk name="coma">
            <tags>
              <tag><lit-tag v="cm"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: elimina ¿ i ¡-->
      <pattern>
        <pattern-item n="lquest"/>
      </pattern>
      <action>
      </action>
    </rule>
  </section-rules>
</transfer>
